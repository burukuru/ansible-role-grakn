---
#### Global settings ####

host_address: "{{ansible_default_ipv4.address}}"

# Grakn deployment
grakn_version: "1.0.0"
grakn_dist: "grakn-dist-{{ grakn_version }}"
grakn_archive_format: "tar.gz"
grakn_package: "{{ grakn_dist }}.{{ grakn_archive_format }}"

redeploy: false
upload_release: false
grakn_package_directory: "files/"
grakn_download_url: "https://github.com/graknlabs/grakn/releases/download/v{{ grakn_version }}/{{ grakn_package }}"

grakn_service_state: "started"
custom_logback: false

cluster_home: /opt/
log_home: /var/log/grakn/
user_name: grakn
group_name: grakn

# Grakn properties
grakn_knowledge_base_sharding_threshold: "100000"
grakn_knowledge_base_schema_cache_timeout_ms: "120000"
grakn_engine_taskmanager_implementation: "ai.grakn.engine.tasks.manager.singlequeue.SingleQueueTaskManager"
grakn_tasks_postprocessing_delay: "60000"
grakn_loader_threads: "0"
grakn_log_dirs: "/var/log/grakn/"
grakn_log_level: "INFO"

storage_hostname: localhost
#storage_cassandra_replication_strategy_class: org.apache.cassandra.locator.SimpleStrategy
#storage_cassandra_replication_strategy_options: "replication_factor,1"

queue_host: "localhost:6379"

kafka_hosts: ['localhost']
zookeeper_hosts: ['localhost']

grakn_analytics_spark_master: "local[*]"
grakn_analytics_spark_executor_cores: "1"
grakn_analytics_spark_executor_memory: "1g"
grakn_analytics_spark_cores_max: "6"

# Grakn JVM settings
grakn_extra_options: "-Xmx12g -XX:+HeapDumpOnOutOfMemoryError"
grakn_java_options: ""

# Google Cloud Platform
gcp_autoconfigure: false

#### Global settings ####

host_address: "{{ansible_default_ipv4.address}}"

#### Storage settings ####

cassandra_version: 2.1.17
cassandra_mirror: "http://www.eu.apache.org/dist/cassandra/{{cassandra_version}}"
cassandra_archive_mirror: "http://archive.apache.org/dist/cassandra/{{cassandra_version}}"
cassandra_tarball_name: "apache-cassandra-{{cassandra_version}}-bin.tar.gz"

cassandra_host_address: "{{host_address}}"
cassandra_rpc_address: "0.0.0.0"
cassandra_broadcast_rpc_address: "{{host_address}}"

cassandra_num_tokens: 256

cassandra_hosts: ["{{cassandra_host_address}}"]
cassandra_seeds: ["{{cassandra_host_address}}"]

cassandra_replication_factor: "{{cassandra_hosts | length }}"
cassandra_keyspace: grakn
cassandra_read_consistency: ONE
cassandra_write_consistency: ONE

cassandra_partitioner: org.apache.cassandra.dht.Murmur3Partitioner

cassandra_dir: /var/lib/cassandra
cassandra_data_dir: /var/lib/cassandra/data
cassandra_commitlog_dir: /var/lib/cassandra/commitlog
cassandra_saved_caches_dir: /var/lib/cassandra/saved_caches

cassandra_concurrent_reads: 16
cassandra_concurrent_writes: 16
cassandra_concurrent_counter_writes: 32

cassandra_compaction_throughput_mb_per_sec: 16

cassandra_endpoint_snitch: "SimpleSnitch"

#ports
cassandra_storage_port: 7000
cassandra_ssl_storage_port: 7001
cassandra_native_transport_port: 9042
cassandra_rpc_port: 9160

#ulimit configuration
ulimit_config: 
      - domain: "{{user_name}}"
        type: '-'
        item: memlock
        value: unlimited
      - domain: "{{user_name}}"
        type: '-'
        item: nofile
        value: 100000
      - domain: "{{user_name}}"
        type: '-'
        item: nproc
        value: 32768
      - domain: "{{user_name}}"
        type: '-'
        item: as
        value: unlimited

#Default limits.conf location
ulimit_config_location: /etc/security/limits.conf

# Enable Prometheus JMX exporter for metrics monitoring
monitoring: True
